{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Maryam/OneDrive/Desktop/todoapp/todo-web-app/frontend/lib/theme/theme-provider.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\r\n\r\nexport type Theme = 'light' | 'dark' | 'system';\r\n\r\ninterface ThemeContextValue {\r\n  theme: Theme;\r\n  resolvedTheme: 'light' | 'dark';\r\n  setTheme: (theme: Theme) => void;\r\n}\r\n\r\nconst ThemeContext = createContext<ThemeContextValue | undefined>(undefined);\r\n\r\ninterface ThemeProviderProps {\r\n  children: React.ReactNode;\r\n  defaultTheme?: Theme;\r\n  storageKey?: string;\r\n}\r\n\r\nexport function ThemeProvider({\r\n  children,\r\n  defaultTheme = 'system',\r\n  storageKey = 'todo-app-theme',\r\n}: ThemeProviderProps) {\r\n  const [theme, setThemeState] = useState<Theme>(defaultTheme);\r\n  const [resolvedTheme, setResolvedTheme] = useState<'light' | 'dark'>('light');\r\n\r\n  // Get system preference\r\n  const getSystemTheme = useCallback((): 'light' | 'dark' => {\r\n    if (typeof window === 'undefined') return 'light';\r\n    return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\r\n  }, []);\r\n\r\n  // Resolve theme based on current setting\r\n  const resolveTheme = useCallback((currentTheme: Theme): 'light' | 'dark' => {\r\n    if (currentTheme === 'system') {\r\n      return getSystemTheme();\r\n    }\r\n    return currentTheme;\r\n  }, [getSystemTheme]);\r\n\r\n  // Apply theme to document\r\n  const applyTheme = useCallback((resolved: 'light' | 'dark') => {\r\n    if (typeof document === 'undefined') return;\r\n\r\n    const root = document.documentElement;\r\n    root.classList.remove('light', 'dark');\r\n    root.classList.add(resolved);\r\n    root.style.colorScheme = resolved;\r\n  }, []);\r\n\r\n  // Initialize theme from storage\r\n  useEffect(() => {\r\n    const stored = localStorage.getItem(storageKey) as Theme | null;\r\n    if (stored && ['light', 'dark', 'system'].includes(stored)) {\r\n      setThemeState(stored);\r\n    }\r\n  }, [storageKey]);\r\n\r\n  // Update resolved theme when theme changes\r\n  useEffect(() => {\r\n    const resolved = resolveTheme(theme);\r\n    setResolvedTheme(resolved);\r\n    applyTheme(resolved);\r\n  }, [theme, resolveTheme, applyTheme]);\r\n\r\n  // Listen for system theme changes\r\n  useEffect(() => {\r\n    if (theme !== 'system') return;\r\n\r\n    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\r\n    const handleChange = () => {\r\n      const resolved = getSystemTheme();\r\n      setResolvedTheme(resolved);\r\n      applyTheme(resolved);\r\n    };\r\n\r\n    mediaQuery.addEventListener('change', handleChange);\r\n    return () => mediaQuery.removeEventListener('change', handleChange);\r\n  }, [theme, getSystemTheme, applyTheme]);\r\n\r\n  const setTheme = useCallback((newTheme: Theme) => {\r\n    setThemeState(newTheme);\r\n    localStorage.setItem(storageKey, newTheme);\r\n  }, [storageKey]);\r\n\r\n  return (\r\n    <ThemeContext.Provider value={{ theme, resolvedTheme, setTheme }}>\r\n      {children}\r\n    </ThemeContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useTheme(): ThemeContextValue {\r\n  const context = useContext(ThemeContext);\r\n  if (context === undefined) {\r\n    throw new Error('useTheme must be used within a ThemeProvider');\r\n  }\r\n  return context;\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AAFA;;;AAYA,MAAM,6BAAe,IAAA,0RAAa,EAAgC;AAQ3D,SAAS,cAAc,EAC5B,QAAQ,EACR,eAAe,QAAQ,EACvB,aAAa,gBAAgB,EACV;IACnB,MAAM,CAAC,OAAO,cAAc,GAAG,IAAA,qRAAQ,EAAQ;IAC/C,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,qRAAQ,EAAmB;IAErE,wBAAwB;IACxB,MAAM,iBAAiB,IAAA,wRAAW,EAAC;QACjC,wCAAmC,OAAO;;;IAE5C,GAAG,EAAE;IAEL,yCAAyC;IACzC,MAAM,eAAe,IAAA,wRAAW,EAAC,CAAC;QAChC,IAAI,iBAAiB,UAAU;YAC7B,OAAO;QACT;QACA,OAAO;IACT,GAAG;QAAC;KAAe;IAEnB,0BAA0B;IAC1B,MAAM,aAAa,IAAA,wRAAW,EAAC,CAAC;QAC9B,IAAI,OAAO,aAAa,aAAa;QAErC,MAAM,OAAO,SAAS,eAAe;QACrC,KAAK,SAAS,CAAC,MAAM,CAAC,SAAS;QAC/B,KAAK,SAAS,CAAC,GAAG,CAAC;QACnB,KAAK,KAAK,CAAC,WAAW,GAAG;IAC3B,GAAG,EAAE;IAEL,gCAAgC;IAChC,IAAA,sRAAS,EAAC;QACR,MAAM,SAAS,aAAa,OAAO,CAAC;QACpC,IAAI,UAAU;YAAC;YAAS;YAAQ;SAAS,CAAC,QAAQ,CAAC,SAAS;YAC1D,cAAc;QAChB;IACF,GAAG;QAAC;KAAW;IAEf,2CAA2C;IAC3C,IAAA,sRAAS,EAAC;QACR,MAAM,WAAW,aAAa;QAC9B,iBAAiB;QACjB,WAAW;IACb,GAAG;QAAC;QAAO;QAAc;KAAW;IAEpC,kCAAkC;IAClC,IAAA,sRAAS,EAAC;QACR,IAAI,UAAU,UAAU;QAExB,MAAM,aAAa,OAAO,UAAU,CAAC;QACrC,MAAM,eAAe;YACnB,MAAM,WAAW;YACjB,iBAAiB;YACjB,WAAW;QACb;QAEA,WAAW,gBAAgB,CAAC,UAAU;QACtC,OAAO,IAAM,WAAW,mBAAmB,CAAC,UAAU;IACxD,GAAG;QAAC;QAAO;QAAgB;KAAW;IAEtC,MAAM,WAAW,IAAA,wRAAW,EAAC,CAAC;QAC5B,cAAc;QACd,aAAa,OAAO,CAAC,YAAY;IACnC,GAAG;QAAC;KAAW;IAEf,qBACE,kTAAC,aAAa,QAAQ;QAAC,OAAO;YAAE;YAAO;YAAe;QAAS;kBAC5D;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,uRAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Maryam/OneDrive/Desktop/todoapp/todo-web-app/frontend/hooks/use-reduced-motion.ts"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\n\r\n/**\r\n * Hook to detect user's preference for reduced motion (FR-026).\r\n * Returns true if the user prefers reduced motion.\r\n */\r\nexport function useReducedMotion(): boolean {\r\n  const [prefersReducedMotion, setPrefersReducedMotion] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Check for the media query on mount\r\n    const mediaQuery = window.matchMedia('(prefers-reduced-motion: reduce)');\r\n    setPrefersReducedMotion(mediaQuery.matches);\r\n\r\n    // Listen for changes\r\n    const handleChange = (event: MediaQueryListEvent) => {\r\n      setPrefersReducedMotion(event.matches);\r\n    };\r\n\r\n    mediaQuery.addEventListener('change', handleChange);\r\n\r\n    return () => {\r\n      mediaQuery.removeEventListener('change', handleChange);\r\n    };\r\n  }, []);\r\n\r\n  return prefersReducedMotion;\r\n}\r\n\r\nexport default useReducedMotion;\r\n"],"names":[],"mappings":";;;;;;AAEA;AAFA;;AAQO,SAAS;IACd,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,IAAA,qRAAQ,EAAC;IAEjE,IAAA,sRAAS,EAAC;QACR,qCAAqC;QACrC,MAAM,aAAa,OAAO,UAAU,CAAC;QACrC,wBAAwB,WAAW,OAAO;QAE1C,qBAAqB;QACrB,MAAM,eAAe,CAAC;YACpB,wBAAwB,MAAM,OAAO;QACvC;QAEA,WAAW,gBAAgB,CAAC,UAAU;QAEtC,OAAO;YACL,WAAW,mBAAmB,CAAC,UAAU;QAC3C;IACF,GAAG,EAAE;IAEL,OAAO;AACT;uCAEe"}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Maryam/OneDrive/Desktop/todoapp/todo-web-app/frontend/components/ui/toast.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { useReducedMotion } from '../../hooks/use-reduced-motion';\r\n\r\nexport type ToastType = 'info' | 'success' | 'warning' | 'error';\r\n\r\ninterface Toast {\r\n  id: string;\r\n  message: string;\r\n  type: ToastType;\r\n  duration?: number;\r\n}\r\n\r\ninterface ToastContextValue {\r\n  addToast: (message: string, type?: ToastType, duration?: number) => void;\r\n  removeToast: (id: string) => void;\r\n}\r\n\r\nconst ToastContext = React.createContext<ToastContextValue | undefined>(undefined);\r\n\r\nexport function useToast(): ToastContextValue {\r\n  const context = React.useContext(ToastContext);\r\n  if (!context) {\r\n    throw new Error('useToast must be used within a ToastProvider');\r\n  }\r\n  return context;\r\n}\r\n\r\ninterface ToastProviderProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport function ToastProvider({ children }: ToastProviderProps) {\r\n  const [toasts, setToasts] = useState<Toast[]>([]);\r\n  const prefersReducedMotion = useReducedMotion();\r\n\r\n  const addToast = useCallback(\r\n    (message: string, type: ToastType = 'info', duration: number = 5000) => {\r\n      const id = Math.random().toString(36).substring(2, 9);\r\n      setToasts((prev) => [...prev, { id, message, type, duration }]);\r\n    },\r\n    []\r\n  );\r\n\r\n  const removeToast = useCallback((id: string) => {\r\n    setToasts((prev) => prev.filter((toast) => toast.id !== id));\r\n  }, []);\r\n\r\n  return (\r\n    <ToastContext.Provider value={{ addToast, removeToast }}>\r\n      {children}\r\n      <ToastContainer\r\n        toasts={toasts}\r\n        removeToast={removeToast}\r\n        prefersReducedMotion={prefersReducedMotion}\r\n      />\r\n    </ToastContext.Provider>\r\n  );\r\n}\r\n\r\ninterface ToastContainerProps {\r\n  toasts: Toast[];\r\n  removeToast: (id: string) => void;\r\n  prefersReducedMotion: boolean;\r\n}\r\n\r\nfunction ToastContainer({ toasts, removeToast, prefersReducedMotion }: ToastContainerProps) {\r\n  return (\r\n    <div className=\"fixed bottom-4 right-4 z-50 flex flex-col gap-2\">\r\n      {toasts.map((toast) => (\r\n        <ToastItem\r\n          key={toast.id}\r\n          toast={toast}\r\n          onClose={() => removeToast(toast.id)}\r\n          prefersReducedMotion={prefersReducedMotion}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface ToastItemProps {\r\n  toast: Toast;\r\n  onClose: () => void;\r\n  prefersReducedMotion: boolean;\r\n}\r\n\r\nfunction ToastItem({ toast, onClose, prefersReducedMotion }: ToastItemProps) {\r\n  useEffect(() => {\r\n    if (toast.duration && toast.duration > 0) {\r\n      const timer = setTimeout(onClose, toast.duration);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [toast.duration, onClose]);\r\n\r\n  const typeStyles = {\r\n    info: 'bg-primary text-primary-foreground',\r\n    success: 'bg-green-500 text-white',\r\n    warning: 'bg-yellow-500 text-black',\r\n    error: 'bg-destructive text-destructive-foreground',\r\n  };\r\n\r\n  const transitionClass = prefersReducedMotion\r\n    ? ''\r\n    : 'animate-in slide-in-from-right-5 fade-in duration-300';\r\n\r\n  return (\r\n    <div\r\n      className={`flex items-center gap-3 px-4 py-3 rounded-lg shadow-lg min-w-[280px] max-w-md ${typeStyles[toast.type]} ${transitionClass}`}\r\n      role=\"alert\"\r\n    >\r\n      <span className=\"flex-1\">{toast.message}</span>\r\n      <button\r\n        onClick={onClose}\r\n        className=\"p-1 hover:opacity-80 transition-opacity\"\r\n        aria-label=\"Close notification\"\r\n      >\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          className=\"h-4 w-4\"\r\n          fill=\"none\"\r\n          viewBox=\"0 0 24 24\"\r\n          stroke=\"currentColor\"\r\n        >\r\n          <path\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            strokeWidth={2}\r\n            d=\"M6 18L18 6M6 6l12 12\"\r\n          />\r\n        </svg>\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ToastProvider;\r\n"],"names":[],"mappings":";;;;;;;;;AAEA;AACA;AAHA;;;;AAmBA,MAAM,6BAAe,oRAAK,CAAC,aAAa,CAAgC;AAEjE,SAAS;IACd,MAAM,UAAU,oRAAK,CAAC,UAAU,CAAC;IACjC,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;AAMO,SAAS,cAAc,EAAE,QAAQ,EAAsB;IAC5D,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,qRAAQ,EAAU,EAAE;IAChD,MAAM,uBAAuB,IAAA,yNAAgB;IAE7C,MAAM,WAAW,IAAA,wRAAW,EAC1B,CAAC,SAAiB,OAAkB,MAAM,EAAE,WAAmB,IAAI;QACjE,MAAM,KAAK,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC,GAAG;QACnD,UAAU,CAAC,OAAS;mBAAI;gBAAM;oBAAE;oBAAI;oBAAS;oBAAM;gBAAS;aAAE;IAChE,GACA,EAAE;IAGJ,MAAM,cAAc,IAAA,wRAAW,EAAC,CAAC;QAC/B,UAAU,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,QAAU,MAAM,EAAE,KAAK;IAC1D,GAAG,EAAE;IAEL,qBACE,kTAAC,aAAa,QAAQ;QAAC,OAAO;YAAE;YAAU;QAAY;;YACnD;0BACD,kTAAC;gBACC,QAAQ;gBACR,aAAa;gBACb,sBAAsB;;;;;;;;;;;;AAI9B;AAQA,SAAS,eAAe,EAAE,MAAM,EAAE,WAAW,EAAE,oBAAoB,EAAuB;IACxF,qBACE,kTAAC;QAAI,WAAU;kBACZ,OAAO,GAAG,CAAC,CAAC,sBACX,kTAAC;gBAEC,OAAO;gBACP,SAAS,IAAM,YAAY,MAAM,EAAE;gBACnC,sBAAsB;eAHjB,MAAM,EAAE;;;;;;;;;;AAQvB;AAQA,SAAS,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE,oBAAoB,EAAkB;IACzE,IAAA,sRAAS,EAAC;QACR,IAAI,MAAM,QAAQ,IAAI,MAAM,QAAQ,GAAG,GAAG;YACxC,MAAM,QAAQ,WAAW,SAAS,MAAM,QAAQ;YAChD,OAAO,IAAM,aAAa;QAC5B;IACF,GAAG;QAAC,MAAM,QAAQ;QAAE;KAAQ;IAE5B,MAAM,aAAa;QACjB,MAAM;QACN,SAAS;QACT,SAAS;QACT,OAAO;IACT;IAEA,MAAM,kBAAkB,uBACpB,KACA;IAEJ,qBACE,kTAAC;QACC,WAAW,CAAC,8EAA8E,EAAE,UAAU,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,EAAE,iBAAiB;QACvI,MAAK;;0BAEL,kTAAC;gBAAK,WAAU;0BAAU,MAAM,OAAO;;;;;;0BACvC,kTAAC;gBACC,SAAS;gBACT,WAAU;gBACV,cAAW;0BAEX,cAAA,kTAAC;oBACC,OAAM;oBACN,WAAU;oBACV,MAAK;oBACL,SAAQ;oBACR,QAAO;8BAEP,cAAA,kTAAC;wBACC,eAAc;wBACd,gBAAe;wBACf,aAAa;wBACb,GAAE;;;;;;;;;;;;;;;;;;;;;;AAMd;uCAEe"}},
    {"offset": {"line": 301, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Maryam/OneDrive/Desktop/todoapp/todo-web-app/frontend/lib/api-client.ts"],"sourcesContent":["import { Task, TaskUpdate, ApiResponse, AuthResponse, Event, EventCreate, EventUpdate, UserProfile, UserProfileUpdate } from './types';\r\n\r\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000';\r\n\r\nconst DEFAULT_TIMEOUT = 30000; // 30 seconds\r\nconst MAX_RETRIES = 3;\r\nconst RETRY_DELAYS = [1000, 2000, 4000]; // Exponential backoff: 1s, 2s, 4s\r\n\r\n/**\r\n * Error types for better error categorization and handling\r\n */\r\nexport enum ApiErrorType {\r\n  NETWORK_ERROR = 'NETWORK_ERROR',\r\n  SERVER_ERROR = 'SERVER_ERROR',\r\n  VALIDATION_ERROR = 'VALIDATION_ERROR',\r\n  AUTH_ERROR = 'AUTH_ERROR',\r\n  TIMEOUT_ERROR = 'TIMEOUT_ERROR',\r\n  UNKNOWN_ERROR = 'UNKNOWN_ERROR',\r\n}\r\n\r\nexport interface ApiError {\r\n  message: string;\r\n  type: ApiErrorType;\r\n  statusCode?: number;\r\n}\r\n\r\n// Event emitter for retry notifications\r\ntype RetryListener = (attempt: number, maxRetries: number) => void;\r\nconst retryListeners: Set<RetryListener> = new Set();\r\n\r\nexport function onRetry(listener: RetryListener): () => void {\r\n  retryListeners.add(listener);\r\n  return () => retryListeners.delete(listener);\r\n}\r\n\r\nfunction notifyRetry(attempt: number, maxRetries: number): void {\r\n  retryListeners.forEach((listener) => listener(attempt, maxRetries));\r\n}\r\n\r\nclass ApiClient {\r\n  private getAuthToken(): string | null {\r\n    if (typeof window !== 'undefined') {\r\n      return localStorage.getItem('access_token');\r\n    }\r\n    return null;\r\n  }\r\n\r\n  private setAuthTokens(accessToken: string, refreshToken?: string): void {\r\n    if (typeof window !== 'undefined') {\r\n      localStorage.setItem('access_token', accessToken);\r\n      if (refreshToken) {\r\n        localStorage.setItem('refresh_token', refreshToken);\r\n      }\r\n    }\r\n  }\r\n\r\n  private clearAuthTokens(): void {\r\n    if (typeof window !== 'undefined') {\r\n      localStorage.removeItem('access_token');\r\n      localStorage.removeItem('refresh_token');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Determines if the error is retryable\r\n   */\r\n  private isRetryableError(error: ApiError): boolean {\r\n    return (\r\n      error.type === ApiErrorType.NETWORK_ERROR ||\r\n      error.type === ApiErrorType.TIMEOUT_ERROR ||\r\n      error.type === ApiErrorType.SERVER_ERROR\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Determines the type of network error based on the error message\r\n   */\r\n  private categorizeNetworkError(error: Error): ApiError {\r\n    const message = error.message.toLowerCase();\r\n\r\n    // Timeout errors\r\n    if (message.includes('timeout') || message.includes('aborted') || error.name === 'AbortError') {\r\n      return {\r\n        message: 'Request timed out. Please check your connection and try again.',\r\n        type: ApiErrorType.TIMEOUT_ERROR,\r\n      };\r\n    }\r\n\r\n    // Connection refused - backend server not running\r\n    if (message.includes('failed to fetch') || message.includes('network') || message.includes('connection')) {\r\n      return {\r\n        message: 'Unable to connect to the server. Please ensure the backend is running on ' + API_BASE_URL,\r\n        type: ApiErrorType.NETWORK_ERROR,\r\n      };\r\n    }\r\n\r\n    // CORS errors\r\n    if (message.includes('cors')) {\r\n      return {\r\n        message: 'Cross-origin request blocked. Please check server CORS configuration.',\r\n        type: ApiErrorType.NETWORK_ERROR,\r\n      };\r\n    }\r\n\r\n    return {\r\n      message: 'A network error occurred. Please check your connection.',\r\n      type: ApiErrorType.NETWORK_ERROR,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Categorizes HTTP error responses\r\n   */\r\n  private categorizeHttpError(status: number, detail?: string): ApiError {\r\n    if (status === 401) {\r\n      return {\r\n        message: detail || 'Authentication required. Please log in.',\r\n        type: ApiErrorType.AUTH_ERROR,\r\n        statusCode: status,\r\n      };\r\n    }\r\n\r\n    if (status === 403) {\r\n      return {\r\n        message: detail || 'You do not have permission to perform this action.',\r\n        type: ApiErrorType.AUTH_ERROR,\r\n        statusCode: status,\r\n      };\r\n    }\r\n\r\n    if (status === 422 || status === 400) {\r\n      return {\r\n        message: detail || 'Invalid input. Please check your data and try again.',\r\n        type: ApiErrorType.VALIDATION_ERROR,\r\n        statusCode: status,\r\n      };\r\n    }\r\n\r\n    if (status >= 500) {\r\n      return {\r\n        message: detail || 'Server error. Please try again later.',\r\n        type: ApiErrorType.SERVER_ERROR,\r\n        statusCode: status,\r\n      };\r\n    }\r\n\r\n    return {\r\n      message: detail || `Request failed with status ${status}`,\r\n      type: ApiErrorType.UNKNOWN_ERROR,\r\n      statusCode: status,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Sleep for a specified duration\r\n   */\r\n  private sleep(ms: number): Promise<void> {\r\n    return new Promise((resolve) => setTimeout(resolve, ms));\r\n  }\r\n\r\n  /**\r\n   * Make a single request with timeout\r\n   */\r\n  private async singleRequest<T>(\r\n    endpoint: string,\r\n    options: RequestInit = {},\r\n    timeout: number = DEFAULT_TIMEOUT\r\n  ): Promise<{ data?: T; error?: ApiError }> {\r\n    const token = this.getAuthToken();\r\n\r\n    const headers: HeadersInit = {\r\n      'Content-Type': 'application/json',\r\n      ...options.headers,\r\n    };\r\n\r\n    if (token) {\r\n      (headers as Record<string, string>)['Authorization'] = `Bearer ${token}`;\r\n    }\r\n\r\n    // Create abort controller for timeout\r\n    const controller = new AbortController();\r\n    const timeoutId = setTimeout(() => controller.abort(), timeout);\r\n\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}${endpoint}`, {\r\n        ...options,\r\n        headers,\r\n        signal: controller.signal,\r\n      });\r\n\r\n      clearTimeout(timeoutId);\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json().catch(() => ({}));\r\n        const apiError = this.categorizeHttpError(response.status, errorData.detail);\r\n        return { error: apiError };\r\n      }\r\n\r\n      const data = await response.json();\r\n      return { data };\r\n    } catch (error) {\r\n      clearTimeout(timeoutId);\r\n      if (error instanceof Error) {\r\n        const apiError = this.categorizeNetworkError(error);\r\n        return { error: apiError };\r\n      }\r\n      return {\r\n        error: {\r\n          message: 'An unexpected error occurred',\r\n          type: ApiErrorType.UNKNOWN_ERROR,\r\n        },\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Make a request with automatic retry on failure\r\n   */\r\n  private async request<T>(\r\n    endpoint: string,\r\n    options: RequestInit = {},\r\n    enableRetry: boolean = true\r\n  ): Promise<ApiResponse<T>> {\r\n    let lastError: ApiError | undefined;\r\n\r\n    for (let attempt = 0; attempt <= (enableRetry ? MAX_RETRIES : 0); attempt++) {\r\n      if (attempt > 0) {\r\n        const delay = RETRY_DELAYS[attempt - 1] || RETRY_DELAYS[RETRY_DELAYS.length - 1];\r\n        notifyRetry(attempt, MAX_RETRIES);\r\n        await this.sleep(delay);\r\n      }\r\n\r\n      const result = await this.singleRequest<T>(endpoint, options);\r\n\r\n      if (result.data) {\r\n        return { data: result.data };\r\n      }\r\n\r\n      if (result.error) {\r\n        lastError = result.error;\r\n\r\n        // Don't retry on non-retryable errors\r\n        if (!this.isRetryableError(result.error)) {\r\n          return { error: result.error.message };\r\n        }\r\n      }\r\n    }\r\n\r\n    return { error: lastError?.message || 'Request failed after multiple retries' };\r\n  }\r\n\r\n  // Auth methods (no retry on auth requests)\r\n  async login(email: string, password: string): Promise<ApiResponse<AuthResponse>> {\r\n    const response = await this.request<AuthResponse>(\r\n      '/api/auth/login',\r\n      {\r\n        method: 'POST',\r\n        body: JSON.stringify({ email, password }),\r\n      },\r\n      false // Disable retry for auth\r\n    );\r\n\r\n    if (response.data) {\r\n      this.setAuthTokens(response.data.access_token, response.data.refresh_token);\r\n    }\r\n\r\n    return response;\r\n  }\r\n\r\n  async register(email: string, password: string): Promise<ApiResponse<AuthResponse>> {\r\n    const response = await this.request<AuthResponse>(\r\n      '/api/auth/register',\r\n      {\r\n        method: 'POST',\r\n        body: JSON.stringify({ email, password }),\r\n      },\r\n      false // Disable retry for auth\r\n    );\r\n\r\n    if (response.data) {\r\n      this.setAuthTokens(response.data.access_token);\r\n    }\r\n\r\n    return response;\r\n  }\r\n\r\n  async logout(): Promise<ApiResponse<{ message: string }>> {\r\n    const response = await this.request<{ message: string }>(\r\n      '/api/auth/logout',\r\n      { method: 'POST' },\r\n      false\r\n    );\r\n    this.clearAuthTokens();\r\n    return response;\r\n  }\r\n\r\n  // Task methods\r\n  async getTasks(): Promise<ApiResponse<Task[]>> {\r\n    return this.request<Task[]>('/api/tasks/');\r\n  }\r\n\r\n  async getTask(taskId: string): Promise<ApiResponse<Task>> {\r\n    return this.request<Task>(`/api/tasks/${taskId}`);\r\n  }\r\n\r\n  async createTask(title: string, description?: string): Promise<ApiResponse<Task>> {\r\n    return this.request<Task>('/api/tasks/', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ title, description }),\r\n    });\r\n  }\r\n\r\n  async updateTask(taskId: string, taskData: TaskUpdate): Promise<ApiResponse<Task>> {\r\n    return this.request<Task>(`/api/tasks/${taskId}`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(taskData),\r\n    });\r\n  }\r\n\r\n  async deleteTask(taskId: string): Promise<ApiResponse<{ message: string }>> {\r\n    return this.request<{ message: string }>(`/api/tasks/${taskId}`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  async reorderTasks(taskIds: string[]): Promise<ApiResponse<{ message: string }>> {\r\n    return this.request<{ message: string }>('/api/tasks/reorder', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ task_ids: taskIds }),\r\n    });\r\n  }\r\n\r\n  // Check if user is authenticated\r\n  isAuthenticated(): boolean {\r\n    return !!this.getAuthToken();\r\n  }\r\n\r\n  // Event methods\r\n  async getEvents(startDate?: string, endDate?: string): Promise<ApiResponse<Event[]>> {\r\n    let endpoint = '/api/events/';\r\n    const params = new URLSearchParams();\r\n    if (startDate) params.append('start_date', startDate);\r\n    if (endDate) params.append('end_date', endDate);\r\n    if (params.toString()) endpoint += `?${params.toString()}`;\r\n    return this.request<Event[]>(endpoint);\r\n  }\r\n\r\n  async getEvent(eventId: string): Promise<ApiResponse<Event>> {\r\n    return this.request<Event>(`/api/events/${eventId}`);\r\n  }\r\n\r\n  async createEvent(eventData: EventCreate): Promise<ApiResponse<Event>> {\r\n    return this.request<Event>('/api/events/', {\r\n      method: 'POST',\r\n      body: JSON.stringify(eventData),\r\n    });\r\n  }\r\n\r\n  async updateEvent(eventId: string, eventData: EventUpdate): Promise<ApiResponse<Event>> {\r\n    return this.request<Event>(`/api/events/${eventId}`, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(eventData),\r\n    });\r\n  }\r\n\r\n  async deleteEvent(eventId: string): Promise<ApiResponse<{ message: string }>> {\r\n    return this.request<{ message: string }>(`/api/events/${eventId}`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  // User profile methods\r\n  async getProfile(): Promise<ApiResponse<UserProfile>> {\r\n    return this.request<UserProfile>('/api/users/profile');\r\n  }\r\n\r\n  async updateProfile(profileData: UserProfileUpdate): Promise<ApiResponse<UserProfile>> {\r\n    return this.request<UserProfile>('/api/users/profile', {\r\n      method: 'PUT',\r\n      body: JSON.stringify(profileData),\r\n    });\r\n  }\r\n\r\n  async completeOnboarding(): Promise<ApiResponse<UserProfile>> {\r\n    return this.request<UserProfile>('/api/users/onboarding', {\r\n      method: 'POST',\r\n    });\r\n  }\r\n}\r\n\r\nexport const apiClient = new ApiClient();\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 628, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Maryam/OneDrive/Desktop/todoapp/todo-web-app/frontend/components/ui/reconnecting-indicator.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { onRetry } from '../../lib/api-client';\r\n\r\nexport function ReconnectingIndicator() {\r\n  const [isReconnecting, setIsReconnecting] = useState(false);\r\n  const [attempt, setAttempt] = useState(0);\r\n  const [maxRetries, setMaxRetries] = useState(3);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onRetry((currentAttempt, max) => {\r\n      setIsReconnecting(true);\r\n      setAttempt(currentAttempt);\r\n      setMaxRetries(max);\r\n\r\n      // Hide after a delay when not retrying anymore\r\n      const timer = setTimeout(() => {\r\n        setIsReconnecting(false);\r\n      }, 3000);\r\n\r\n      return () => clearTimeout(timer);\r\n    });\r\n\r\n    return unsubscribe;\r\n  }, []);\r\n\r\n  if (!isReconnecting) return null;\r\n\r\n  return (\r\n    <div className=\"fixed bottom-4 left-4 z-50 flex items-center gap-3 px-4 py-3 bg-yellow-500 text-black rounded-lg shadow-lg animate-pulse\">\r\n      <svg\r\n        className=\"animate-spin h-5 w-5\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        fill=\"none\"\r\n        viewBox=\"0 0 24 24\"\r\n      >\r\n        <circle\r\n          className=\"opacity-25\"\r\n          cx=\"12\"\r\n          cy=\"12\"\r\n          r=\"10\"\r\n          stroke=\"currentColor\"\r\n          strokeWidth=\"4\"\r\n        />\r\n        <path\r\n          className=\"opacity-75\"\r\n          fill=\"currentColor\"\r\n          d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\r\n        />\r\n      </svg>\r\n      <span className=\"font-medium\">\r\n        Reconnecting... ({attempt}/{maxRetries})\r\n      </span>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ReconnectingIndicator;\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAHA;;;;AAKO,SAAS;IACd,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,qRAAQ,EAAC;IACrD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,qRAAQ,EAAC;IACvC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,qRAAQ,EAAC;IAE7C,IAAA,sRAAS,EAAC;QACR,MAAM,cAAc,IAAA,mMAAO,EAAC,CAAC,gBAAgB;YAC3C,kBAAkB;YAClB,WAAW;YACX,cAAc;YAEd,+CAA+C;YAC/C,MAAM,QAAQ,WAAW;gBACvB,kBAAkB;YACpB,GAAG;YAEH,OAAO,IAAM,aAAa;QAC5B;QAEA,OAAO;IACT,GAAG,EAAE;IAEL,IAAI,CAAC,gBAAgB,OAAO;IAE5B,qBACE,kTAAC;QAAI,WAAU;;0BACb,kTAAC;gBACC,WAAU;gBACV,OAAM;gBACN,MAAK;gBACL,SAAQ;;kCAER,kTAAC;wBACC,WAAU;wBACV,IAAG;wBACH,IAAG;wBACH,GAAE;wBACF,QAAO;wBACP,aAAY;;;;;;kCAEd,kTAAC;wBACC,WAAU;wBACV,MAAK;wBACL,GAAE;;;;;;;;;;;;0BAGN,kTAAC;gBAAK,WAAU;;oBAAc;oBACV;oBAAQ;oBAAE;oBAAW;;;;;;;;;;;;;AAI/C;uCAEe"}},
    {"offset": {"line": 805, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Maryam/OneDrive/Desktop/todoapp/todo-web-app/frontend/lib/chatbot/api-client.ts"],"sourcesContent":["/**\r\n * API client for connecting to the AI Chatbot endpoint\r\n * Now integrated into the main backend (same URL as main API)\r\n */\r\n\r\nimport axios from 'axios';\r\n\r\n// Use the same backend URL as the main app (chatbot is now part of main backend)\r\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000';\r\n\r\ninterface ChatResponse {\r\n  conversation_id: number;\r\n  response: string;\r\n  tool_calls: { name: string; arguments: Record<string, unknown>; result?: Record<string, unknown> }[];\r\n  task_changed: boolean; // Indicates if tasks were modified (for UI refresh)\r\n}\r\n\r\nclass ChatApiClient {\r\n  private baseUrl: string;\r\n\r\n  constructor() {\r\n    this.baseUrl = API_BASE_URL;\r\n  }\r\n\r\n  /**\r\n   * Send a chat message to the chatbot endpoint (now part of main backend)\r\n   * @param authToken - JWT token from main app\r\n   * @param message - User's message\r\n   * @param conversationId - Optional conversation ID for context\r\n   */\r\n  async sendMessage(authToken: string, message: string, conversationId?: number): Promise<ChatResponse> {\r\n    const response = await axios.post<ChatResponse>(\r\n      `${this.baseUrl}/api/chat`,\r\n      { conversation_id: conversationId, message },\r\n      {\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${authToken}`,\r\n        },\r\n      }\r\n    );\r\n    return response.data;\r\n  }\r\n}\r\n\r\nexport const chatApiClient = new ChatApiClient();\r\n"],"names":[],"mappings":";;;;AAAA;;;CAGC,GAED;;AAEA,iFAAiF;AACjF,MAAM,eAAe,QAAQ,GAAG,CAAC,mBAAmB,IAAI;AASxD,MAAM;IACI,QAAgB;IAExB,aAAc;QACZ,IAAI,CAAC,OAAO,GAAG;IACjB;IAEA;;;;;GAKC,GACD,MAAM,YAAY,SAAiB,EAAE,OAAe,EAAE,cAAuB,EAAyB;QACpG,MAAM,WAAW,MAAM,oNAAK,CAAC,IAAI,CAC/B,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,EAC1B;YAAE,iBAAiB;YAAgB;QAAQ,GAC3C;YACE,SAAS;gBACP,gBAAgB;gBAChB,iBAAiB,CAAC,OAAO,EAAE,WAAW;YACxC;QACF;QAEF,OAAO,SAAS,IAAI;IACtB;AACF;AAEO,MAAM,gBAAgB,IAAI"}},
    {"offset": {"line": 844, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Maryam/OneDrive/Desktop/todoapp/todo-web-app/frontend/components/chatbot/ChatInterface.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport { chatApiClient } from '@/lib/chatbot/api-client';\r\n\r\ninterface Message {\r\n  role: 'user' | 'assistant';\r\n  content: string;\r\n  taskChanged?: boolean; // Flag to trigger task list refresh\r\n}\r\n\r\ninterface ChatInterfaceProps {\r\n  authToken: string | null;\r\n  initialConversationId?: number;\r\n}\r\n\r\nconst ChatInterface: React.FC<ChatInterfaceProps> = ({ authToken, initialConversationId }) => {\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [input, setInput] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [conversationId, setConversationId] = useState<number | undefined>(initialConversationId);\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }, [messages]);\r\n\r\n  const onSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    const message = input.trim();\r\n    if (!message || isLoading) return;\r\n\r\n    if (!authToken) {\r\n      setMessages((prev) => [...prev,\r\n        { role: 'user', content: message },\r\n        { role: 'assistant', content: 'Please log in to manage your tasks.' }\r\n      ]);\r\n      setInput('');\r\n      return;\r\n    }\r\n\r\n    setMessages((prev) => [...prev, { role: 'user', content: message }]);\r\n    setInput('');\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      const response = await chatApiClient.sendMessage(authToken, message, conversationId);\r\n      if (response.conversation_id) {\r\n        setConversationId(response.conversation_id);\r\n      }\r\n      setMessages((prev) => [...prev, { role: 'assistant', content: response.response, taskChanged: response.task_changed }]);\r\n\r\n      // Dispatch event to refresh task list if tasks were modified\r\n      if (response.task_changed) {\r\n        window.dispatchEvent(new CustomEvent('tasks-updated'));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error sending message:', error);\r\n      setMessages((prev) => [...prev, { role: 'assistant', content: 'Sorry, something went wrong. Please try again.' }]);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full bg-background\">\r\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-3\">\r\n        {messages.length === 0 && (\r\n          <div className=\"text-center mt-4 space-y-2\">\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              {authToken ? 'Hi! I can help you manage your tasks.' : 'Please log in to manage tasks.'}\r\n            </p>\r\n            {authToken && (\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                Try: \"Add buy groceries\" or \"Show my tasks\"\r\n              </p>\r\n            )}\r\n          </div>\r\n        )}\r\n        {messages.map((msg, index) => (\r\n          <div key={index} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>\r\n            <div\r\n              className={`max-w-[80%] rounded-2xl px-4 py-2 text-sm ${\r\n                msg.role === 'user'\r\n                  ? 'bg-primary text-primary-foreground rounded-br-none'\r\n                  : 'bg-secondary text-secondary-foreground rounded-bl-none'\r\n              }`}\r\n            >\r\n              <div className=\"whitespace-pre-wrap\">{msg.content}</div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n        {isLoading && (\r\n          <div className=\"flex justify-start\">\r\n            <div className=\"bg-secondary text-secondary-foreground rounded-2xl rounded-bl-none px-4 py-2\">\r\n              <div className=\"flex space-x-1\">\r\n                <div className=\"w-2 h-2 bg-muted-foreground rounded-full animate-bounce\" />\r\n                <div className=\"w-2 h-2 bg-muted-foreground rounded-full animate-bounce [animation-delay:75ms]\" />\r\n                <div className=\"w-2 h-2 bg-muted-foreground rounded-full animate-bounce [animation-delay:150ms]\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n\r\n      <div className=\"p-4 border-t border-border\">\r\n        <form onSubmit={onSubmit} className=\"flex gap-2\">\r\n          <input\r\n            type=\"text\"\r\n            value={input}\r\n            onChange={(e) => setInput(e.target.value)}\r\n            placeholder=\"Type your message...\"\r\n            className=\"flex-1 border border-input rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary bg-background\"\r\n            disabled={isLoading}\r\n          />\r\n          <button\r\n            type=\"submit\"\r\n            disabled={isLoading || !input.trim()}\r\n            className=\"bg-primary text-primary-foreground rounded-lg px-4 py-2 text-sm hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            Send\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatInterface;\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAgBA,MAAM,gBAA8C,CAAC,EAAE,SAAS,EAAE,qBAAqB,EAAE;IACvF,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,qRAAQ,EAAY,EAAE;IACtD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,qRAAQ,EAAC;IACnC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,qRAAQ,EAAC;IAC3C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,qRAAQ,EAAqB;IACzE,MAAM,iBAAiB,IAAA,mRAAM,EAAiB;IAE9C,IAAA,sRAAS,EAAC;QACR,eAAe,OAAO,EAAE,eAAe;YAAE,UAAU;QAAS;IAC9D,GAAG;QAAC;KAAS;IAEb,MAAM,WAAW,OAAO;QACtB,EAAE,cAAc;QAChB,MAAM,UAAU,MAAM,IAAI;QAC1B,IAAI,CAAC,WAAW,WAAW;QAE3B,IAAI,CAAC,WAAW;YACd,YAAY,CAAC,OAAS;uBAAI;oBACxB;wBAAE,MAAM;wBAAQ,SAAS;oBAAQ;oBACjC;wBAAE,MAAM;wBAAa,SAAS;oBAAsC;iBACrE;YACD,SAAS;YACT;QACF;QAEA,YAAY,CAAC,OAAS;mBAAI;gBAAM;oBAAE,MAAM;oBAAQ,SAAS;gBAAQ;aAAE;QACnE,SAAS;QACT,aAAa;QAEb,IAAI;YACF,MAAM,WAAW,MAAM,oNAAa,CAAC,WAAW,CAAC,WAAW,SAAS;YACrE,IAAI,SAAS,eAAe,EAAE;gBAC5B,kBAAkB,SAAS,eAAe;YAC5C;YACA,YAAY,CAAC,OAAS;uBAAI;oBAAM;wBAAE,MAAM;wBAAa,SAAS,SAAS,QAAQ;wBAAE,aAAa,SAAS,YAAY;oBAAC;iBAAE;YAEtH,6DAA6D;YAC7D,IAAI,SAAS,YAAY,EAAE;gBACzB,OAAO,aAAa,CAAC,IAAI,YAAY;YACvC;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,0BAA0B;YACxC,YAAY,CAAC,OAAS;uBAAI;oBAAM;wBAAE,MAAM;wBAAa,SAAS;oBAAiD;iBAAE;QACnH,SAAU;YACR,aAAa;QACf;IACF;IAEA,qBACE,kTAAC;QAAI,WAAU;;0BACb,kTAAC;gBAAI,WAAU;;oBACZ,SAAS,MAAM,KAAK,mBACnB,kTAAC;wBAAI,WAAU;;0CACb,kTAAC;gCAAE,WAAU;0CACV,YAAY,0CAA0C;;;;;;4BAExD,2BACC,kTAAC;gCAAE,WAAU;0CAAgC;;;;;;;;;;;;oBAMlD,SAAS,GAAG,CAAC,CAAC,KAAK,sBAClB,kTAAC;4BAAgB,WAAW,CAAC,KAAK,EAAE,IAAI,IAAI,KAAK,SAAS,gBAAgB,iBAAiB;sCACzF,cAAA,kTAAC;gCACC,WAAW,CAAC,0CAA0C,EACpD,IAAI,IAAI,KAAK,SACT,uDACA,0DACJ;0CAEF,cAAA,kTAAC;oCAAI,WAAU;8CAAuB,IAAI,OAAO;;;;;;;;;;;2BAR3C;;;;;oBAYX,2BACC,kTAAC;wBAAI,WAAU;kCACb,cAAA,kTAAC;4BAAI,WAAU;sCACb,cAAA,kTAAC;gCAAI,WAAU;;kDACb,kTAAC;wCAAI,WAAU;;;;;;kDACf,kTAAC;wCAAI,WAAU;;;;;;kDACf,kTAAC;wCAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;kCAKvB,kTAAC;wBAAI,KAAK;;;;;;;;;;;;0BAGZ,kTAAC;gBAAI,WAAU;0BACb,cAAA,kTAAC;oBAAK,UAAU;oBAAU,WAAU;;sCAClC,kTAAC;4BACC,MAAK;4BACL,OAAO;4BACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;4BACxC,aAAY;4BACZ,WAAU;4BACV,UAAU;;;;;;sCAEZ,kTAAC;4BACC,MAAK;4BACL,UAAU,aAAa,CAAC,MAAM,IAAI;4BAClC,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAOX;uCAEe"}},
    {"offset": {"line": 1087, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Maryam/OneDrive/Desktop/todoapp/todo-web-app/frontend/components/ChatWidget.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { MessageCircle, X } from 'lucide-react';\r\nimport ChatInterface from '@/components/chatbot/ChatInterface';\r\n\r\nexport default function ChatWidget() {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [authToken, setAuthToken] = useState<string | null>(null);\r\n\r\n  // Get auth token from localStorage\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('access_token');\r\n    setAuthToken(token);\r\n\r\n    // Listen for storage changes (login/logout)\r\n    const handleStorageChange = () => {\r\n      setAuthToken(localStorage.getItem('access_token'));\r\n    };\r\n    window.addEventListener('storage', handleStorageChange);\r\n    return () => window.removeEventListener('storage', handleStorageChange);\r\n  }, []);\r\n\r\n  // Re-check token when widget opens\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      setAuthToken(localStorage.getItem('access_token'));\r\n    }\r\n  }, [isOpen]);\r\n\r\n  return (\r\n    <>\r\n      {/* Floating Button - positioned above the Add Task FAB */}\r\n      <button\r\n        onClick={() => setIsOpen(true)}\r\n        className={`fixed bottom-28 right-6 z-50 w-14 h-14 rounded-full bg-primary text-primary-foreground shadow-lg hover:bg-primary/90 transition-all flex items-center justify-center ${\r\n          isOpen ? 'scale-0' : 'scale-100'\r\n        }`}\r\n        aria-label=\"Open chat\"\r\n      >\r\n        <MessageCircle className=\"w-6 h-6\" />\r\n      </button>\r\n\r\n      {/* Chat Modal */}\r\n      {isOpen && (\r\n        <div className=\"fixed bottom-28 right-6 z-50 w-[380px] h-[500px] rounded-2xl shadow-2xl border border-border bg-background overflow-hidden flex flex-col animate-in slide-in-from-bottom-4 duration-300\">\r\n          {/* Modal Header */}\r\n          <div className=\"flex items-center justify-between px-4 py-3 border-b border-border bg-muted/50\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <MessageCircle className=\"w-5 h-5 text-primary\" />\r\n              <span className=\"font-medium text-sm\">Task Assistant</span>\r\n            </div>\r\n            <button\r\n              onClick={() => setIsOpen(false)}\r\n              className=\"p-1 hover:bg-muted rounded-md transition-colors\"\r\n              aria-label=\"Close chat\"\r\n            >\r\n              <X className=\"w-5 h-5\" />\r\n            </button>\r\n          </div>\r\n\r\n          {/* Chat Content */}\r\n          <div className=\"flex-1 overflow-hidden\">\r\n            <ChatInterface authToken={authToken} />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,qRAAQ,EAAC;IACrC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,qRAAQ,EAAgB;IAE1D,mCAAmC;IACnC,IAAA,sRAAS,EAAC;QACR,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,aAAa;QAEb,4CAA4C;QAC5C,MAAM,sBAAsB;YAC1B,aAAa,aAAa,OAAO,CAAC;QACpC;QACA,OAAO,gBAAgB,CAAC,WAAW;QACnC,OAAO,IAAM,OAAO,mBAAmB,CAAC,WAAW;IACrD,GAAG,EAAE;IAEL,mCAAmC;IACnC,IAAA,sRAAS,EAAC;QACR,IAAI,QAAQ;YACV,aAAa,aAAa,OAAO,CAAC;QACpC;IACF,GAAG;QAAC;KAAO;IAEX,qBACE;;0BAEE,kTAAC;gBACC,SAAS,IAAM,UAAU;gBACzB,WAAW,CAAC,qKAAqK,EAC/K,SAAS,YAAY,aACrB;gBACF,cAAW;0BAEX,cAAA,kTAAC,6SAAa;oBAAC,WAAU;;;;;;;;;;;YAI1B,wBACC,kTAAC;gBAAI,WAAU;;kCAEb,kTAAC;wBAAI,WAAU;;0CACb,kTAAC;gCAAI,WAAU;;kDACb,kTAAC,6SAAa;wCAAC,WAAU;;;;;;kDACzB,kTAAC;wCAAK,WAAU;kDAAsB;;;;;;;;;;;;0CAExC,kTAAC;gCACC,SAAS,IAAM,UAAU;gCACzB,WAAU;gCACV,cAAW;0CAEX,cAAA,kTAAC,qQAAC;oCAAC,WAAU;;;;;;;;;;;;;;;;;kCAKjB,kTAAC;wBAAI,WAAU;kCACb,cAAA,kTAAC,sNAAa;4BAAC,WAAW;;;;;;;;;;;;;;;;;;;AAMtC"}}]
}